 if (MapUtils.isNotEmpty(preAuthHeadersMap) && CrspConstants.SPSRWB.equalsIgnoreCase(preAuthHeadersMap.get(CrspConstants.UC_VENDOR_ID))
                && null != preAuthHeadersMap.get(CrspConstants.UC_PLAN_ID_LIST)) {
            List<String> globalPlanList = Arrays.asList(StringUtils.split(preAuthHeadersMap.get(CrspConstants.UC_PLAN_ID_LIST), ","));

            List<MailInfo> filteredDocuments = new ArrayList<>();
            for (MailInfo mailInfo : mailInfoList) {
                List<DocumentInfo> documentInfoList = new ArrayList<>();
                for (DocumentInfo docInfo : mailInfo.getDocumentInfo()) {
                    if (globalPlanList.contains(docInfo.getPlanId())) {
                        documentInfoList.add(docInfo);
                    } else {
                        log.debug("planId [{}] is not in cache for [{}]. Filtering out.", docInfo.getPlanId(), clientId);
                    }
                }
                if (!documentInfoList.isEmpty()) {
                    mailInfo.getDocumentInfo().clear();
                    mailInfo.getDocumentInfo().addAll(documentInfoList);
                    filteredDocuments.add(mailInfo);
                }
            }
            return filteredDocuments;
